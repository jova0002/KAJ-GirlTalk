---
import Heading from "./Heading.astro";

const navItems = [
  { label: "BLIV FRIVILLIG", href: "/Frivilig" },
  { label: "OM OS", href: "/Omos" },
  { label: "VORES TILBUD", href: "/" },
  { label: "STØT", href: "/" },
  { label: "SHOP", href: "/" },
];
---

<nav class="w-full sticky top-0 z-50
         bg-[var(--color-primary-beige)]
         md:border-b md:border-[var(--color-primary-brown)]">
  <!-- ================= DESKTOP NAV ================= -->
  <div class="hidden md:flex h-[64px] items-stretch">
    <!-- Logo -->
    <a href="/" class="flex items-center px-6
             border-r border-[var(--color-primary-brown)]
             shrink-0">
      <img src="/logo.svg" alt="GIRLTALK DK" class="h-5" />
    </a>

    <!-- Nav items -->
    {
      navItems.map((item) => (
        <a
          href={item.href}
          class="flex flex-1 items-center justify-center
                 border-r border-[var(--color-primary-brown)]
                 transition-colors duration-200
                 hover:bg-[var(--color-primary-pink)]
                 whitespace-nowrap
                 text-[var(--color-primary-brown)]"
        >
          <Heading size="microcopystor" htmlheading="span">
            {item.label}
          </Heading>
        </a>
      ))
    }

    <!-- CTA -->
    <a href="/" class="flex flex-1 items-center justify-center
             bg-[var(--color-primary-brown)]
             text-[var(--color-primary-beige)]
             whitespace-nowrap">
      <Heading size="microcopystor" htmlheading="span" stylingclasses="font-bold"> GÅ TIL “FOR UNGE” </Heading>
    </a>
  </div>

  <!-- ================= MOBILE TOP BAR ================= -->
  <div class="md:hidden h-[64px] flex items-center justify-end px-5
           bg-[var(--color-primary-beige)]">
    <!-- Burger -->
    <button id="burger" type="button" aria-label="Menu" aria-controls="mobileMenu" aria-expanded="false" class="text-[var(--color-primary-brown)] text-4xl cursor-pointer
             select-none"> ☰ </button>
  </div>

  <!-- ================= MOBILE MENU (overlay panel) ================= -->
  <div id="mobileMenu" class="md:hidden fixed left-0 right-0 top-[64px] bottom-0
           bg-[var(--color-primary-beige)] z-50 overflow-auto max-h-0
           transition-[max-height] duration-300 ease-in-out">
    <!-- Header INSIDE dropdown (logo + close) -->
    <div class="flex items-center justify-between px-5 py-5
            border-b border-[var(--color-primary-brown)]">
      <a href="/" class="flex items-center cursor-pointer">
        <img src="/logo.svg" alt="GIRLTALK DK" class="h-5" />
      </a>
    </div>

    <!-- Links -->
    <div class="flex flex-col">
      {
        navItems.map((item) => (
          <a
            href={item.href}
            class="px-5 py-5
                   border-b border-[var(--color-primary-brown)]
                   text-[var(--color-primary-brown)]"
          >
            <Heading size="microcopystor" htmlheading="span">
              {item.label}
            </Heading>
          </a>
        ))
      }

      <!-- CTA -->
      <a href="/for-unge" class="px-5 py-6
               bg-[var(--color-primary-brown)]
               text-[var(--color-primary-beige)]">
        <Heading size="microcopystor" htmlheading="span" stylingclasses="font-bold"> GÅ TIL “FOR UNGE” </Heading>
      </a>
    </div>
  </div>
</nav>

<script>
  const burger = document.getElementById("burger");
  const menu = document.getElementById("mobileMenu");

  let isOpen = false;

  burger.addEventListener("click", () => {
    isOpen = !isOpen;

    if (isOpen) {
      menu.style.maxHeight = menu.scrollHeight + "px";
      document.body.style.overflow = "hidden";
      burger.textContent = "✕";
    } else {
      menu.style.maxHeight = "0px";
      document.body.style.overflow = "";
      burger.textContent = "☰";
    }
  });
</script>
